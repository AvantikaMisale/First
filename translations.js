/**
 * Translations for multi-language support (English and Hindi)
 */

// Available languages
const LANGUAGES = {
    en: 'English',
    hi: 'हिंदी' // Hindi
};

// Translations dictionary
const translations = {
    // General
    'Financial Assistant': {
        hi: 'वित्तीय सहायक'
    },
    'Dashboard': {
        hi: 'डैशबोर्ड'
    },
    'Portfolio': {
        hi: 'पोर्टफोलियो'
    },
    'Market Data': {
        hi: 'मार्केट डेटा'
    },
    'Profile': {
        hi: 'प्रोफाइल'
    },
    'Login': {
        hi: 'लॉग इन'
    },
    'Register': {
        hi: 'रजिस्टर'
    },
    'Logout': {
        hi: 'लॉग आउट'
    },
    'Welcome': {
        hi: 'स्वागत है'
    },
    'Submit': {
        hi: 'सबमिट'
    },
    'Cancel': {
        hi: 'रद्द करें'
    },
    'Save': {
        hi: 'सेव करें'
    },
    'Edit': {
        hi: 'एडिट'
    },
    'Delete': {
        hi: 'डिलीट'
    },
    'Search': {
        hi: 'खोज'
    },
    'Loading': {
        hi: 'लोड हो रहा है'
    },
    'Error': {
        hi: 'एरर'
    },
    'Success': {
        hi: 'सफलता'
    },
    'Warning': {
        hi: 'चेतावनी'
    },
    'Info': {
        hi: 'जानकारी'
    },
    'Close': {
        hi: 'बंद करें'
    },
    'Back': {
        hi: 'वापस'
    },
    'Next': {
        hi: 'अगला'
    },
    'Previous': {
        hi: 'पिछला'
    },
    
    // Login/Register
    'Email': {
        hi: 'ईमेल'
    },
    'Password': {
        hi: 'पासवर्ड'
    },
    'Confirm Password': {
        hi: 'पासवर्ड की पुष्टि करें'
    },
    'Username': {
        hi: 'यूजरनेम'
    },
    'Language': {
        hi: 'भाषा'
    },
    'Remember me': {
        hi: 'मुझे याद रखें'
    },
    'Forgot Password?': {
        hi: 'पासवर्ड भूल गए?'
    },
    "Don't have an account?": {
        hi: 'अकाउंट नहीं है?'
    },
    'Already have an account?': {
        hi: 'पहले से अकाउंट है?'
    },
    'Sign up now': {
        hi: 'अभी साइन अप करें'
    },
    'Sign in': {
        hi: 'साइन इन करें'
    },
    'Create Account': {
        hi: 'अकाउंट बनाएं'
    },
    
    // Dashboard
    'Portfolio Summary': {
        hi: 'पोर्टफोलियो सारांश'
    },
    'Total Value': {
        hi: 'कुल मूल्य'
    },
    'Total Cost': {
        hi: 'कुल लागत'
    },
    'Total Return': {
        hi: 'कुल रिटर्न'
    },
    'Asset Count': {
        hi: 'एसेट संख्या'
    },
    'Market Summary': {
        hi: 'मार्केट सारांश'
    },
    'Latest News': {
        hi: 'नवीनतम समाचार'
    },
    'AI Insights': {
        hi: 'एआई इनसाइट्स'
    },
    'Risk Profile': {
        hi: 'रिस्क प्रोफाइल'
    },
    'View Portfolio': {
        hi: 'पोर्टफोलियो देखें'
    },
    'View All': {
        hi: 'सभी देखें'
    },
    
    // Portfolio
    'Add Asset': {
        hi: 'एसेट जोड़ें'
    },
    'Remove Asset': {
        hi: 'एसेट हटाएं'
    },
    'Symbol': {
        hi: 'सिंबल'
    },
    'Name': {
        hi: 'नाम'
    },
    'Type': {
        hi: 'प्रकार'
    },
    'Quantity': {
        hi: 'मात्रा'
    },
    'Price': {
        hi: 'कीमत'
    },
    'Current Price': {
        hi: 'वर्तमान कीमत'
    },
    'Purchase Price': {
        hi: 'खरीद मूल्य'
    },
    'Market Value': {
        hi: 'मार्केट वैल्यू'
    },
    'Return': {
        hi: 'रिटर्न'
    },
    'Actions': {
        hi: 'कार्रवाई'
    },
    'Transaction History': {
        hi: 'ट्रांजेक्शन हिस्ट्री'
    },
    'Date': {
        hi: 'तारीख'
    },
    'Total': {
        hi: 'कुल'
    },
    'Buy': {
        hi: 'खरीदें'
    },
    'Sell': {
        hi: 'बेचें'
    },
    'Asset Allocation': {
        hi: 'एसेट एलोकेशन'
    },
    'Performance': {
        hi: 'प्रदर्शन'
    },
    'stock': {
        hi: 'स्टॉक'
    },
    'crypto': {
        hi: 'क्रिप्टो'
    },
    'buy': {
        hi: 'खरीद'
    },
    'sell': {
        hi: 'बिक्री'
    },
    'Adding...': {
        hi: 'जोड़ रहा है...'
    },
    'No assets found in this portfolio': {
        hi: 'इस पोर्टफोलियो में कोई एसेट नहीं मिला'
    },
    'No transactions found': {
        hi: 'कोई ट्रांजेक्शन नहीं मिला'
    },
    
    // Market Data
    'Stock': {
        hi: 'स्टॉक'
    },
    'Cryptocurrency': {
        hi: 'क्रिप्टोकरेंसी'
    },
    'Market Cap': {
        hi: 'मार्केट कैप'
    },
    'P/E Ratio': {
        hi: 'पी/ई रेशियो'
    },
    'Sector': {
        hi: 'सेक्टर'
    },
    'Industry': {
        hi: 'इंडस्ट्री'
    },
    'Dividend Yield': {
        hi: 'डिविडेंड यील्ड'
    },
    'Add to Portfolio': {
        hi: 'पोर्टफोलियो में जोड़ें'
    },
    'Analyze Market Sentiment': {
        hi: 'मार्केट सेंटिमेंट का विश्लेषण करें'
    },
    'Get AI Insights': {
        hi: 'एआई इनसाइट्स प्राप्त करें'
    },
    'Company Description': {
        hi: 'कंपनी विवरण'
    },
    'No description available': {
        hi: 'कोई विवरण उपलब्ध नहीं'
    },
    'Market Overview': {
        hi: 'मार्केट ओवरव्यू'
    },
    'Market Indices': {
        hi: 'मार्केट इंडेक्स'
    },
    'Cryptocurrencies': {
        hi: 'क्रिप्टोकरेंसी'
    },
    'Search Assets': {
        hi: 'एसेट खोजें'
    },
    'Enter stock or crypto symbol': {
        hi: 'स्टॉक या क्रिप्टो सिंबल दर्ज करें'
    },
    'Popular Stocks': {
        hi: 'लोकप्रिय स्टॉक्स'
    },
    'Popular Cryptocurrencies': {
        hi: 'लोकप्रिय क्रिप्टोकरेंसी'
    },
    'AI Assistant': {
        hi: 'एआई असिस्टेंट'
    },
    'Chat with Assistant': {
        hi: 'असिस्टेंट से चैट करें'
    },
    'Data Not Found': {
        hi: 'डेटा नहीं मिला'
    },
    'Could not find data for symbol': {
        hi: 'सिंबल के लिए डेटा नहीं मिल सका'
    },
    'Please check the symbol and try again': {
        hi: 'कृपया सिंबल जांचें और फिर से प्रयास करें'
    },
    'No chart data available': {
        hi: 'कोई चार्ट डेटा उपलब्ध नहीं'
    },
    'Market Sentiment Analysis': {
        hi: 'मार्केट सेंटिमेंट एनालिसिस'
    },
    'Analyzing market sentiment': {
        hi: 'मार्केट सेंटिमेंट का विश्लेषण हो रहा है'
    },
    'Analysis Error': {
        hi: 'विश्लेषण त्रुटि'
    },
    'Failed to analyze market sentiment': {
        hi: 'मार्केट सेंटिमेंट का विश्लेषण करने में विफल'
    },
    'Please try again later': {
        hi: 'कृपया बाद में फिर से प्रयास करें'
    },
    'Generating insights': {
        hi: 'इनसाइट्स जनरेट हो रहे हैं'
    },
    'Failed to generate insights': {
        hi: 'इनसाइट्स जनरेट करने में विफल'
    },
    'Latest News for': {
        hi: 'नवीनतम समाचार'
    },
    'No news found for': {
        hi: 'कोई समाचार नहीं मिला'
    },
    'Positive': {
        hi: 'सकारात्मक'
    },
    'Negative': {
        hi: 'नकारात्मक'
    },
    'Neutral': {
        hi: 'तटस्थ'
    },
    'This is an AI-generated analysis and should not be considered as financial advice.': {
        hi: 'यह एआई-जनित विश्लेषण है और इसे वित्तीय सलाह के रूप में नहीं माना जाना चाहिए।'
    },
    
    // AI Chat
    'Ask me anything about finance...': {
        hi: 'वित्त के बारे में कुछ भी पूछें...'
    },
    'Send': {
        hi: 'भेजें'
    },
    'Suggested Questions': {
        hi: 'सुझाए गए प्रश्न'
    },
    'What are the best investment strategies for beginners?': {
        hi: 'शुरुआती निवेशकों के लिए सबसे अच्छी निवेश रणनीतियां क्या हैं?'
    },
    'How do I diversify my portfolio?': {
        hi: 'मैं अपने पोर्टफोलियो को कैसे विविधता दूं?'
    },
    'Explain the difference between stocks and bonds.': {
        hi: 'स्टॉक्स और बॉन्ड्स के बीच अंतर बताएं।'
    },
    'What is dollar-cost averaging?': {
        hi: 'डॉलर-कॉस्ट एवरेजिंग क्या है?'
    },
    'How can I analyze risk in my investments?': {
        hi: 'मैं अपने निवेशों में जोखिम का विश्लेषण कैसे कर सकता हूं?'
    },
    
    // Chat specific translations
    'chat.greeting': {
        hi: 'नमस्ते! मैं आपका वित्तीय सहायक हूं। मैं आपकी कैसे मदद कर सकता हूं? आप मुझसे स्टॉक्स, क्रिप्टोकरेंसी, निवेश सलाह, या वित्तीय अवधारणाओं के बारे में पूछ सकते हैं।'
    },
    'chat.error': {
        hi: 'क्षमा करें, आपके अनुरोध को संसाधित करने में एक त्रुटि हुई। कृपया पुन: प्रयास करें।'
    },

    // Profile
    'Account Information': {
        hi: 'खाता जानकारी'
    },
    'Email Address': {
        hi: 'ईमेल पता'
    },
    'Change Password': {
        hi: 'पासवर्ड बदलें'
    },
    'Current Password': {
        hi: 'वर्तमान पासवर्ड'
    },
    'New Password': {
        hi: 'नया पासवर्ड'
    },
    'Confirm New Password': {
        hi: 'नए पासवर्ड की पुष्टि करें'
    },
    'Update Profile': {
        hi: 'प्रोफाइल अपडेट करें'
    },
    'Set your risk tolerance and investment preferences': {
        hi: 'अपनी जोखिम सहनशक्ति और निवेश प्राथमिकताएं सेट करें'
    },
    'Investment Horizon': {
        hi: 'निवेश क्षितिज'
    },
    'Short-term (< 1 year)': {
        hi: 'अल्पकालिक (< 1 वर्ष)'
    },
    'Medium-term (1-5 years)': {
        hi: 'मध्यम अवधि (1-5 वर्ष)'
    },
    'Long-term (> 5 years)': {
        hi: 'दीर्घकालिक (> 5 वर्ष)'
    },
    'Income Level': {
        hi: 'आय स्तर'
    },
    'Low': {
        hi: 'निम्न'
    },
    'Medium': {
        hi: 'मध्यम'
    },
    'High': {
        hi: 'उच्च'
    },
    'Risk Tolerance': {
        hi: 'जोखिम सहनशीलता'
    },
    'Conservative': {
        hi: 'रूढ़िवादी'
    },
    'Moderate': {
        hi: 'मध्यम'
    },
    'Aggressive': {
        hi: 'आक्रामक'
    },
    'Investment Goals': {
        hi: 'निवेश लक्ष्य'
    },
    'Retirement': {
        hi: 'सेवानिवृत्ति'
    },
    'Education': {
        hi: 'शिक्षा'
    },
    'Wealth Accumulation': {
        hi: 'धन संचय'
    },
    'Home Purchase': {
        hi: 'घर खरीद'
    },
    'Other': {
        hi: 'अन्य'
    },
    'Save Preferences': {
        hi: 'प्राथमिकताएँ सहेजें'
    }
};

// Get the current language from the page
function getCurrentLanguage() {
    return document.documentElement.lang || 'en';
}

// Get translation for a key
function getTranslation(key) {
    const language = getCurrentLanguage();
    
    // Return the key if we're using English (default)
    if (language === 'en') {
        return key;
    }
    
    // Try to find the translation
    if (translations[key] && translations[key][language]) {
        return translations[key][language];
    }
    
    // Return the original key if no translation found
    return key;
}

// Change language for the entire application
function changeLanguage(language) {
    if (!LANGUAGES[language]) {
        console.error(`Language ${language} is not supported`);
        return;
    }
    
    // Send the language change request to the server
    fetch('/api/language', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ language })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Reload the page to apply the language change
            window.location.reload();
        } else {
            console.error('Failed to change language:', data.error);
        }
    })
    .catch(error => {
        console.error('Error changing language:', error);
    });
}

// Translate all elements with data-i18n attribute when the DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Add language switcher in the navbar if it exists
    const languageSwitcher = document.getElementById('language-switcher');
    if (languageSwitcher) {
        let switcherHtml = '';
        
        for (const [code, name] of Object.entries(LANGUAGES)) {
            switcherHtml += `
                <a class="dropdown-item language-option" href="#" data-lang="${code}">
                    ${name}
                </a>
            `;
        }
        
        languageSwitcher.innerHTML = switcherHtml;
        
        // Add event listeners to language options
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', function(e) {
                e.preventDefault();
                const language = this.dataset.lang;
                changeLanguage(language);
            });
        });
    }
    
    // Set the current language indicator
    const currentLanguageEl = document.getElementById('current-language');
    if (currentLanguageEl) {
        const currentLang = getCurrentLanguage();
        currentLanguageEl.textContent = LANGUAGES[currentLang] || LANGUAGES.en;
    }
    
    // Translate elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.dataset.i18n;
        element.textContent = getTranslation(key);
    });
});
